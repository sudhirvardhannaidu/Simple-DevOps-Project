pipeline{
	agent any
	environment {
			PATH = "/opt/apache-maven-3.8.4/bin:$PATH"
	} 
	stages {
		stage("Clone Code"){
			steps{
			   git 'https://github.com/sudhirvardhannaidu/hello-world.git'
			}
		}
		stage("Build Code"){
			steps{
				sh "mvn clean install"
			}
		}
	    stage("Deploy artifact on docker-M/C"){
			steps{
			    sshagent(['war-deploy']){
				sh "scp -o StrictHostKeyChecking=no /var/lib/jenkins/workspace/Jenkins-docker-war-file-deploy/webapp/target/webapp.war ec2-user@3.94.54.184:/opt"
			    }
	    }
	}
}
